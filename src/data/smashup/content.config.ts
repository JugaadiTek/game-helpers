// creat a schema for src/data/smashup/active/active.json
import { z } from "zod";
import { defineCollection } from "astro:content";
import { glob, file } from "astro/loaders";
const game = {
  "date": "2025-05-11",
  "players": [
    { "id": 0, "nick": "JT",  "name": "üë®üèΩ‚Äçüíª Trash",   "factions": [ "Innsmouth",   "Killer Plants" ] },
    { "id": 1, "nick": "S!n", "name": "üíÉüèº S!nn",    "factions": [ "Dragons",     "Wizards"       ] },
    { "id": 2, "nick": "Avi", "name": "üï¥üèΩ Avinash", "factions": [ "Kitty Cats",  "Aliens"        ] }
  ],
  "gamedata": {
    "mechanics": { "madness": true, "monsters": false, "treasures": false, "titans": false },
    "active_bases": [ "The Great Library", "Innsmouth", "Dragon‚Äôs Lair" ],
    "discarded_bases": [ "The Great Library", "The House of Nine Lives", "The Greenhouse", "Secret Grove", "The Homeworld", "The Mothership", "School of Wizardry", "Wyrm‚Äôs Desolation", "Cool Cats‚Äô Alley", "Ritual Site", "Secret Grove" ]
  },
  "score": {
    "current": [ 13, 11, 15 ],
    "log": [
      [ {}, {}, {} ],
      [ {}, {}, {} ],
      [ {}, {}, {"scoring": [{ "base": "üëΩ Invader",                                                   "vps": [ [0,0,1], [ 0,0, 0] ] }] } ],
      [ {}, {}, {"scoring": [{ "base": "üëΩ Invader",                                                   "vps": [ [0,0,1], [ 0,0, 0] ] }] } ],
      [ {}, {}, {} ],
      [         {"scoring": [{ "base": "The Greenhouse",          "bp": 0,  "pow":[[ 2,0,0],[ 2,0,0]],  "vps": [ [4,0,0], [ 0,0, 0] ] }] },
                {"scoring": [{ "base": "THe House of Nine Lives", "bp": 20, "pow":[[ 8,3,9],[ 8,3,9]],  "vps": [ [2,1,4], [-1,0,-1] ] }] }, {} ],
      [         {"scoring": [{ "base": "Secret Grove",            "bp": 21, "pow":[[20,1,1],[20,1,1]],  "vps": [ [3,2,2], [-1,0,-1] ] }] }, {}, 
                {"scoring": [{ "base": "üëΩ Invader",                                                   "vps": [ [0,0,1], [ 0,0, 0] ] }] }],
      [ {}, {}, {"scoring": [{ "base": "üëΩ Invader",                                                   "vps": [ [0,0,1], [ 0,0, 0] ] }] }],
      [         {"scoring": [{ "base": "The Homeworld",           "bp": 23, "pow":[[14,4,5],[14,6,5]],  "vps": [ [4,2,1], [ 0,0, 0] ] }] }, {}, {} ],
      [ {}, {}, {"scoring": [{ "base": "The Mothership",          "bp": 17, "pow":[[0,6,11],[0,6,11]],  "vps": [ [0,2,4], [ 0,0,-1] ] }] } ],
      [ {}, {}, {} ],
      [ {},     {"scoring": [{ "base": "The School Wizardry",     "bp": 20, "pow":[[18,3,0],[18,3,0]],  "vps": [ [3,2,0], [-1,0, 0] ] }] }, {} ],
      [ {}, {}, {}],
      [ {}, {}, {"scoring": [{ "base": "Secret Grove",            "bp": 21, "pow":[[0,0,20],[0,0,20]],  "vps": [ [0,2,3], [ 0,0, 0] ] }] } ]
    ]
  }
}
const FactionSchema = z.enum([
  "Aliens", "Dinosaurs", "Ninjas", "Pirates", "Robots", "Tricksters", "Wizards", "Zombies",
  "Bear Cavalry", "Ghosts", "Killer Plants", "Steampunks",
  "Elder Things", "Innsmouth", "Minions of Cthulhu", "Miskatonic University",
  "Cyborg Apes", "Shapeshifters", "Super Spies", "Time Travelers",
  "Giant Ants", "Mad Scientists", "Vampires", "Werewolves",
  "Fairies", "Kitty Cats", "Mythic Horses", "Princesses",
  "Clerics", "Dwarves", "Elves", "Halflings", "Mages", "Orcs", "Thieves", "Warriors",
  "Dragons", "Mythic Greeks", "Sharks", "Superheroes", "Tornados",
  "Astroknights", "Changerbots", "Ignobles", "Star Roamers",
  "Explorers", "Grannies", "Rock Stars", "Teddy Bears",
  "Itty Critters", "Kaiju", "Magical Girls", "Mega Troopers",
  "Disco Dancers", "Kung Fu Fighters", "Truckers", "Vigilantes",
  "Geeks", "Smash Up All Stars",
  "Ancient Egyptians", "Cowboys", "Samurai", "Vikings",
  "Luchadors", "Mounties", "Musketeers", "Sumo Wrestlers",
  "Penguins",
  "Anansi Tales", "Ancient Incas", "Grimms‚Äô Fairy Tales", "Polynesian Voyagers", "Russian Fairy Tales",
  "Avengers", "Hydra", "Kree", "Masters of Evil", "S.H.I.E.L.D.", "Sinister Six", "Spider-Verse", "Ultimates",
  "Goblins",
  "Knights of the Round Table",
  "Aladdin", "Beauty and the Beast", "Big Hero 6", "Frozen", "Mulan", "The Lion King", "The Nightmare Before Christmas", "Wreck-It Ralph",
  "Dead Reckoning Promo", "Mermaids", "Sheep", "Skeletons", "World Champs",
  "Action Heroes", "Backtimers", "Extramorphs", "Wraithrustlers",
  "Teens"
]);
const baseSchema = z.enum([
  "The Homeworld",
  "The Mothership",
  "Jungle Oasis",
  "Tar Pits",
  "Ninja Dojo",
  "Temple of Goju",
  "The Grey Opal",
  "Tortuga",
  "Factory 436-1337",
  "The Central Brain",
  "Cave of Shinies",
  "Mushroom Kin gdom",
  "School of Wizardry",
  "The Great Library",
  "Evans City Cemetery",
  "Rhodes Plaza Mall",
  "Field of Honor",
  "Tsar‚Äôs Palace",
  "Haunted House",
  "The Dread Gazebo",
  "Secret Grove",
  "The Greenhouse",
  "Inventor‚Äôs Salon",
  "Workshop",
  "Antarctic Base",
  "Plateau of Leng",
  "Innsmouth",
  "Ritual Site",
  "Mountains of Madness",
  "R‚Äôlyeh",
  "Asylum",
  "Miskatonic University",
  "Monkey Lab",
  "Primate Park",
  "Faceless City",
  "The Vats",
  "ISI‚Äôs Swingin‚Äô Pad",
  "Secret Volcano Headquarters",
  "Portal Room",
  "The Nexus",
  "Egg Chamber",
  "The Hill",
  "Golem Schlo√ü",
  "Laboratorium",
  "Castle Blood",
  "Crypt",
  "Moot Site",
  "Standing Stones",
  "Enchanted Glen",
  "Fairy Circle",
  "Cool Cats‚Äô Alley",
  "The House of Nine Lives",
  "Equaria",
  "Pony Land",
  "Beautiful Castle",
  "Ice Castle",
  "Hotel of Holiness",
  "Whack-A-Ghoul",
  "The Mines",
  "Treasure Bath",
  "Helper‚Äôs Hollow",
  "Treehouse",
  "Birthday Party",
  "Subterranean Lair",
  "Dimension Doors",
  "Mage‚Äôs Tower",
  "Garrison",
  "The Pits",
  "The Coffers",
  "Thieves‚Äô Guild",
  "Bastion",
  "The Gauntlet",
  "Dragon‚Äôs Lair",
  "Wyrm‚Äôs Desolation",
  "Oracle at Delphi",
  "Wooden Horse",
  "Shark Reef",
  "The Deep",
  "Converted Cave",
  "Crystal Fortress",
  "Tornado Alley",
  "Trailer Park",
  "Hive of Scum and Villainy",
  "No-Moon‚Ñ¢",
  "Changing Room",
  "Unicrave",
  "Spikey Chair Room",
  "Wintersquashed",
  "Neutral Space",
  "USS Undertaking",
  "Ancient Temple",
  "City of Gold",
  "Grandma‚Äôs House",
  "Retirement Community",
  "Lake Minnetonka",
  "Palooza",
  "Out in the Woods",
  "Under the Bed",
  "Critter Combat Club",
  "Itty City",
  "Kaiju Island",
  "Tokyo",
  "Akihabara High",
  "Q Point",
  "Juice Bar",
  "Moon Dumpster",
  "Boogie Wonderland",
  "Funky Town",
  "Ancient Dojo",
  "Tournament Site",
  "The Greasy Spoon",
  "Truck Stop",
  "Hideout",
  "The Mean Streets",
  "TableTop",
  "The Con",
  "Locker Room",
  "Stadium",
  "Pyramids",
  "Star Portal",
  "Saloon",
  "So-So Corral",
  "Sakura Garden",
  "Shogun‚Äôs Palace",
  "Drakkar",
  "Longhouse",
  "Ringside",
  "The Squared Circle",
  "Great White North, Eh?",
  "Strategic Syrup Reserve",
  "Bastion Saint-Gervais",
  "The Golden Lily",
  "Heya Training Stable",
  "The Dohyo",
  "Ice Floe",
  "The Colony",
  "Anansi‚Äôs Web",
  "Storyteller‚Äôs Hut",
  "Cuzcu",
  "Machu Picchu",
  "Gingerbread House",
  "Woodland Cottage",
  "Island Chain",
  "Island Peak",
  "Tropical Paradise",
  "Giant Turnip",
  "Transformation Spring",
  "Avengers Tower",
  "Stark‚Äôs Lab",
  "Hydra Lab",
  "Ichor Base",
  "Hala",
  "Kree-Lar",
  "Castle Zemo",
  "Symkaria",
  "Helicarrier",
  "S.H.I.E.L.D. Base",
  "Downtown",
  "New York Landmark",
  "Manhattan",
  "The Daily Bugle",
  "Exo-Space",
  "The Triskelion",
  "Goblin Caves",
  "Goblin Town",
  "Camelot",
  "Round Table",
  "Agrabah Bazaar",
  "Sultan‚Äôs Palace",
  "Enchanted Castle",
  "Gaston‚Äôs Tavern",
  "Krei Tech",
  "SFIT Robotics Lab",
  "Arendelle",
  "Ice Palace",
  "Forbidden City",
  "Training Camp",
  "Jungle Paradise",
  "Pride Rock",
  "Halloween Town",
  "Spiral Hill",
  "The Dump",
  "The Power Strip",
  "Deepreef Crag",
  "Mermaid Pool",
  "Mermaid Reef",
  "Sheep Shrine",
  "The Pasture",
  "Boneyard",
  "Ossuary",
  "Arena",
  "Hall of Fame",
  "Building Rooftop",
  "Jungle Camp",
  "Alternate Present",
  "Time-Traveling Car",
  "Ancient Crashed Ship",
  "Brood Hive",
  "Rooftop Portal",
  "Wraithrustlers HQ",
  "Cabin in the Woods",
  "Montridge High"
]);

const PlayerSchema = z.object({
  "id": z.number().int().min(0),
  "nick": z.string().min(1).max(3),
  "name": z.string().min(1).max(32),
  "factions": z.array(FactionSchema).length(2)
});
const GamedataSchema = z.object({
  "date": z.date(),
  "players": z.array(PlayerSchema),
  "mechanics": z.object({
    "madness": z.boolean(),
    "monsters": z.boolean(),
    "treasures": z.boolean(),
    "titans": z.boolean()
  }),
  "active_bases": z.array(baseSchema),
  "discarded_bases": z.array(baseSchema)
});
const ScoreSchema = z.object({
  "current": z.array(z.number().int().min(0).max(20)).length(3),
  "log": z.array(z.array(z.object({
    "scoring": z.array(z.object({
      "base": baseSchema,
      "bp": z.number().int().min(0).max(20),
      "pow": z.array(z.array(z.number().int().min(0).max(20))).length(2),
      "vps": z.array(z.array(z.number().int().min(-1).max(20))).length(2)
    }))
  })))
});
const GameSchema = z.object({
  "date": z.date(),
  "players": z.array(PlayerSchema),
  "gamedata": GamedataSchema,
  "score": ScoreSchema
});



  